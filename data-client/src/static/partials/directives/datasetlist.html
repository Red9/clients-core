<div ng-if="resourceList.length === 0">
    <br/><br/>No results found.
</div>
<div ng-if="resourceList === null">
    <div ng-if="leaderboardData === null" class="spinner-wrapper">
        <i class="red9logo large pulse"></i>
    </div>
</div>
<div ng-if="resourceList.length > 0" class="map graph more-margin">
    <leaflet class="embed-responsive embed-responsive-16by9" markers="map.markers" layers="map.layers"
             bounds="map.bounds" center="map.center"></leaflet>
    <br/>
</div>
<div>
    <div class="row vertical-align">
        <div class="col-xs-9">
            <div class="btn-toolbar" role="toolbar">
                <div class="btn-group">
                    <button class="btn btn-md btn-default" ng-click="deleteSelected(resourceList)"><span
                            class="glyphicon glyphicon-trash"></span></button>
                    <button class="btn btn-md btn-default" ng-click="searchEvents(resourceList)"
                            ng-if="resourceType === 'dataset'">Events
                    </button>
                </div>
            </div>
        </div>
        <div class="col-xs-3 text-right">
            <p class="text-muted">{{resourceList.length}} results</p>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-xs-12">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                    <th>
                    </th>
                    <th>User</th>
                    <th>Session</th>
                    <th><span class="pull-right">Tags&nbsp;</span></th>
                    <th><abbr title="Events">Evt.</abbr></th>
                    <th><abbr title="Videos">Vid.</abbr></th>
                    <th><abbr title="Comments">Com.</abbr></th>
                    </thead>

                    <tbody>
                    <tr ng-repeat-start="dataset in resourcePage" class="ngFade"
                        ng-click="dataset.expanded = !dataset.expanded">
                        <td class="vertical-center">
                            <input type="checkbox" ng-model="dataset.selected" ng-click="$event.stopPropagation();">
                        </td>
                        <td class="vertical-center">
                            <a ng-href="/user/{{dataset.owner.id}}">
                                <img ng-src="{{dataset.owner.picture}}?sz=40" width="40px" height="40px" class="profile-pic"/>
                                <span class="displayName">{{dataset.owner.displayName}}</span>
                            </a>
                        </td>
                        <td class="vertical-center">
                            <a ng-href="/analysis/{{dataset.id}}">
                                {{dataset.title| limitTo:60}}<span ng-if="dataset.title.length > 60">...</span>
                            </a>
                        </td>
                        <td class="vertical-center">
                            <badge-list list="dataset.tags" class="pull-right" muted="true"></badge-list>
                        </td>
                        <td class="vertical-center">
                            <span class="text-muted">{{dataset.count.event > 0 ? dataset.count.event : ''}}</span>
                        </td>
                        <td class="vertical-center">
                            <span class="text-muted">{{dataset.count.video > 0 ? dataset.count.video : ''}}</span>
                        </td>
                        <td class="vertical-center">
                            <span class="text-muted">{{dataset.count.comment > 0 ? dataset.count.comment : ''}}</span>
                        </td>
                    </tr>
                    <tr ng-if="dataset.expanded" ng-repeat-end="" class="expanded-info">
                        <td colspan="100">
                            <ul class="list-unstyled">
                                <li><span class="text-muted">Recorded</span> {{dataset.startTime| date}}</li>
                                <li><span class="text-muted">Uploaded</span> {{dataset.createTime| date}}</li>
                                <li>
                                    <span class="text-muted">Duration</span>
                                    {{dataset.endTime - dataset.startTime| duration}}
                                </li>
                                <li><a ng-href="/dataset/{{dataset.id}}" target="_self">Graphs <span
                                        class="glyphicon glyphicon-circle-arrow-right"></span></a></li>
                            </ul>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-xs-9">
            <pagination total-items="resourceList.length" ng-model="resourcePages.currentPage"
                        items-per-page="resourcePages.itemsPerPage" max-size="resourcePages.maxSize"
                        boundary-links="true"></pagination>
        </div>
        <div class="col-xs-3">
            <select ng-model="resourcePages.itemsPerPage" class="form-control form-control-inline pull-right">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>
    </div>

</div>


